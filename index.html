
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vuelos tricolor ‚Äì Buscador de vuelos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="img/plain.png">
  <link rel="shortcut icon" href="img/plain.png" type="image/png">
  <style>
    :root{ --brand:#0ea5e9; --brand-600:#0284c7; }
    body{ font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
    .glass{ backdrop-filter: blur(10px); background: rgba(255,255,255,0.85); }
    .sr-only{ position:absolute;width:1px;height:1px;padding:0;margin:-1px;clip:rect(0,0,0,0);overflow:hidden;border:0; }
  </style>  
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17608659483"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17608659483');
</script>
</head>
<body class="bg-gradient-to-b from-sky-100 to-white min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-sky-600 text-white shadow-md">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center gap-3">
        <!-- Icono/Logo -->
        <img src="img/plain.png" alt="Logo Vuelos Tricolor" class="w-12 h-12">

        <!-- Texto -->
        <span class="text-2xl font-bold text-white">Vuelos Tricolor</span>
      </div>


      <nav class="hidden md:block">
        <ul class="flex gap-6 text-sm">
          <li><a href="#" class="hover:underline">Inicio</a></li>
          <li><a href="#" class="hover:underline">Ofertas</a></li>
          <li><a href="#" class="hover:underline">Ayuda</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,rgba(14,165,233,0.25),transparent_50%),radial-gradient(ellipse_at_bottom_left,rgba(125,211,252,0.35),transparent_50%)]"></div>
    <div class="relative max-w-7xl mx-auto px-6 py-10 md:py-16">
      <div class="grid md:grid-cols-2 gap-8 items-center">
        <div>
          <h2 class="text-3xl md:text-4xl font-semibold text-sky-800 leading-tight">
            Descubre los mejores destinos al mejor precio
          </h2>
          <p class="mt-3 text-slate-600">
            Tu agencia de confianza para reservar vuelos nacionales e internacionales de forma r√°pida y segura.
          </p>
          <div class="mt-4 flex flex-wrap gap-2 text-slate-600 text-xs">
            <span class="chip">Vuelos econ√≥micos</span>
            <span class="chip">Destinos nacionales e internacionales</span>
            <span class="chip">Atenci√≥n personalizada 24/7</span>
          </div>

        </div>
        <div>
          <div class="glass rounded-2xl shadow-2xl p-6">
            <form id="searchForm" class="grid sm:grid-cols-2 gap-4">
                <!-- Tipo de viaje -->
                <div class="sm:col-span-2">
                    <label class="block text-sm font-medium text-gray-600">Tipo de viaje</label>
                    <select id="tripType"
                            class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-sky-500 outline-none">
                    <option value="round">Ida y vuelta</option>
                    <option value="oneway">Solo ida</option>
                    </select>
                </div>

                <!-- Origen -->
                <div>
                  <label class="block text-sm font-medium text-gray-600" for="origen">Origen</label>
                  <input id="origen" type="text" placeholder="Ej: Bogot√° (BOG)"
                    class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-sky-500 outline-none" />
                </div>

                <!-- Destino -->
                <div>
                  <label class="block text-sm font-medium text-gray-600" for="destino">Destino</label>
                  <input id="destino" type="text" placeholder="Ej: Medell√≠n / Rionegro (MDE)"
                    class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-sky-500 outline-none" />
                </div>

                <!-- Bot√≥n intercambiar -->
                <div class="sm:col-span-2 flex justify-center">
                    <button type="button" id="swapBtn" title="Intercambiar"
                            class="inline-flex items-center justify-center px-4 py-2 rounded-xl border hover:bg-slate-50">
                    ‚ÜîÔ∏è Intercambiar
                    </button>
                </div>

                <!-- Fechas -->
                <div>
                    <label class="block text-sm font-medium text-gray-600" for="ida">Fecha de ida</label>
                    <input id="ida" type="date"
                        class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-sky-500 outline-none" />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-600" for="vuelta">Fecha de regreso</label>
                    <input id="vuelta" type="date"
                        class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-sky-500 outline-none" />
                </div>

                <!-- Pasajeros + Buscar -->
                <div class="sm:col-span-2 flex gap-3 items-end">
                    <div class="flex-1">
                    <label class="block text-sm font-medium text-gray-600" for="pax">Pasajeros</label>
                    <select id="pax"
                            class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-sky-500 outline-none">
                        <option>1 Adulto</option>
                        <option>2 Adultos</option>
                        <option>3 Adultos</option>
                        <option>4 Adultos</option>
                    </select>
                    </div>
                    <button type="submit"
                            class="flex-1 bg-sky-600 text-white font-semibold py-3 rounded-xl shadow-lg hover:bg-sky-700 transition">
                    Buscar vuelos
                    </button>
                </div>

                <p class="sm:col-span-2 text-xs text-slate-500">
                  * Tarifas sujetas a disponibilidad y cambios sin previo aviso. Aplican t√©rminos y condiciones.
                </p>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Secci√≥n de Ofertas/Destinos -->
  <section class="max-w-7xl mx-auto px-6 py-12">
    <h2 class="text-2xl font-semibold text-sky-800 mb-6 text-center">Destinos populares</h2>

    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Card Bogot√° -->
      <div class="rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition">
        <img src="img/bogota.png" alt="Bogot√°" class="w-full h-48 object-cover">
        <div class="p-5">
          <h3 class="text-lg font-semibold text-sky-700">Bogot√°</h3>
          <p class="text-sm text-slate-600">Vuelos desde $79.000 COP</p>
          <a href="https://tiquetesbaratosflashsale.vercel.app/" class="inline-block mt-3 text-sky-600 font-medium hover:underline">Ver vuelos ‚Üí</a>
        </div>
      </div>

      <!-- Card Cartagena -->
      <div class="rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition">
        <img src="img/cartagena.png" alt="Cartagena" class="w-full h-48 object-cover">
        <div class="p-5">
          <h3 class="text-lg font-semibold text-sky-700">Cartagena</h3>
          <p class="text-sm text-slate-600">Vuelos desde $79.000 COP</p>
          <a href="https://tiquetesbaratosflashsale.vercel.app/" class="inline-block mt-3 text-sky-600 font-medium hover:underline">Ver vuelos ‚Üí</a>
        </div>
      </div>

      <!-- Card Mdell√≠n -->
      <div class="rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition">
        <img src="img/medellin.png" alt="Medell√≠n" class="w-full h-48 object-cover">
        <div class="p-5">
          <h3 class="text-lg font-semibold text-sky-700">Medell√≠n</h3>
          <p class="text-sm text-slate-600">Vuelos desde $79.000 COP</p>
          <a href="https://tiquetesbaratosflashsale.vercel.app/" class="inline-block mt-3 text-sky-600 font-medium hover:underline">Ver vuelos ‚Üí</a>
        </div>
      </div>

      <!-- Card Santa Marta -->
      <div class="rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition">
        <img src="img/santamarta.png" alt="Medell√≠n" class="w-full h-48 object-cover">
        <div class="p-5">
          <h3 class="text-lg font-semibold text-sky-700">Santa Marte</h3>
          <p class="text-sm text-slate-600">Vuelos desde $79.000 COP</p>
          <a href="https://tiquetesbaratosflashsale.vercel.app/" class="inline-block mt-3 text-sky-600 font-medium hover:underline">Ver vuelos ‚Üí</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-sky-600 text-white py-6 text-center text-sm mt-auto">
    ¬© 2025 Vuelos tricolor ‚Äì Derechos reservados
  </footer>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
  
  <script>
      // üëâ Tus listas de ciudades
      const ciudades1 = [
        { id: "400", displayText: "Armenia (AXM)", displayDestinationHtml: "Colombia", displayHtml: "<em>Armenia</em> (AXM)", type: 0, isActive: true, code: "AXM", country: "CO" },
        { id: "402", displayText: "Barranquilla (BAQ)", displayDestinationHtml: "Colombia", displayHtml: "<em>Barranquilla</em> (BAQ)", type: 0, isActive: true, code: "BAQ", country: "CO" },
        { id: "403", displayText: "Bogot√° (BOG)", displayDestinationHtml: "Colombia", displayHtml: "<em>Bogot√°</em> (BOG)", type: 0, isActive: true, code: "BOG", country: "CO" },
        { id: "404", displayText: "Bucaramanga (BGA)", displayDestinationHtml: "Colombia", displayHtml: "<em>Bucaramanga</em> (BGA)", type: 0, isActive: true, code: "BGA", country: "CO" },
        { id: "405", displayText: "Cali (CLO)", displayDestinationHtml: "Colombia", displayHtml: "<em>Cali</em> (CLO)", type: 0, isActive: true, code: "CLO", country: "CO" },
        { id: "406", displayText: "Cartagena (CTG)", displayDestinationHtml: "Colombia", displayHtml: "<em>Cartagena</em> (CTG)", type: 0, isActive: true, code: "CTG", country: "CO" },
        { id: "408", displayText: "C√∫cuta (CUC)", displayDestinationHtml: "Colombia", displayHtml: "<em>C√∫cuta</em> (CUC)", type: 0, isActive: true, code: "CUC", country: "CO" },
        { id: "410", displayText: "Ibagu√© (IBE)", displayDestinationHtml: "Colombia", displayHtml: "<em>Ibagu√©</em> (IBE)", type: 0, isActive: true, code: "IBE", country: "CO" },
        { id: "413", displayText: "Manizales (MZL)", displayDestinationHtml: "Colombia", displayHtml: "<em>Manizales</em> (MZL)", type: 0, isActive: true, code: "MZL", country: "CO" }
      ];

      const ciudades2 = [
        { id: "414", displayText: "Medell√≠n - Jos√© Mar√≠a C√≥rdova (MDE)", displayDestinationHtml: "Colombia", displayHtml: "<em>Medell√≠n - Jos√© Mar√≠a C√≥rdova</em> (MDE)", type: 0, isActive: true, code: "MDE", country: "CO" },
        { id: "415", displayText: "Medell√≠n - Olaya Herrera (EOH)", displayDestinationHtml: "Colombia", displayHtml: "<em>Medell√≠n - Olaya Herrera</em> (EOH)", type: 0, isActive: true, code: "EOH", country: "CO" },
        { id: "416", displayText: "Monter√≠a (MTR)", displayDestinationHtml: "Colombia", displayHtml: "<em>Monter√≠a</em> (MTR)", type: 0, isActive: true, code: "MTR", country: "CO" },
        { id: "417", displayText: "Neiva (NVA)", displayDestinationHtml: "Colombia", displayHtml: "<em>Neiva</em> (NVA)", type: 0, isActive: true, code: "NVA", country: "CO" },
        { id: "418", displayText: "Pasto (PSO)", displayDestinationHtml: "Colombia", displayHtml: "<em>Pasto</em> (PSO)", type: 0, isActive: true, code: "PSO", country: "CO" },
        { id: "419", displayText: "Pereira (PEI)", displayDestinationHtml: "Colombia", displayHtml: "<em>Pereira</em> (PEI)", type: 0, isActive: true, code: "PEI", country: "CO" },
        { id: "420", displayText: "Popay√°n (PPN)", displayDestinationHtml: "Colombia", displayHtml: "<em>Popay√°n</em> (PPN)", type: 0, isActive: true, code: "PPN", country: "CO" },
        { id: "421", displayText: "Puerto As√≠s (PUU)", displayDestinationHtml: "Colombia", displayHtml: "<em>Puerto As√≠s</em> (PUU)", type: 0, isActive: true, code: "PUU", country: "CO" },
        { id: "422", displayText: "Quibd√≥ (UIB)", displayDestinationHtml: "Colombia", displayHtml: "<em>Quibd√≥</em> (UIB)", type: 0, isActive: true, code: "UIB", country: "CO" }
      ];

      const ciudades3 = [
        { id: "423", displayText: "Riohacha (RCH)", displayDestinationHtml: "Colombia", displayHtml: "<em>Riohacha</em> (RCH)", type: 0, isActive: true, code: "RCH", country: "CO" },
        { id: "424", displayText: "San Andr√©s (ADZ)", displayDestinationHtml: "Colombia", displayHtml: "<em>San Andr√©s</em> (ADZ)", type: 0, isActive: true, code: "ADZ", country: "CO" },
        { id: "425", displayText: "San Jos√© del Guaviare (SJE)", displayDestinationHtml: "Colombia", displayHtml: "<em>San Jos√© del Guaviare</em> (SJE)", type: 0, isActive: true, code: "SJE", country: "CO" },
        { id: "426", displayText: "Santa Marta (SMR)", displayDestinationHtml: "Colombia", displayHtml: "<em>Santa Marta</em> (SMR)", type: 0, isActive: true, code: "SMR", country: "CO" },
        { id: "427", displayText: "Tame (TME)", displayDestinationHtml: "Colombia", displayHtml: "<em>Tame</em> (TME)", type: 0, isActive: true, code: "TME", country: "CO" },
        { id: "428", displayText: "Tumaco (TCO)", displayDestinationHtml: "Colombia", displayHtml: "<em>Tumaco</em> (TCO)", type: 0, isActive: true, code: "TCO", country: "CO" },
        { id: "429", displayText: "Valledupar (VUP)", displayDestinationHtml: "Colombia", displayHtml: "<em>Valledupar</em> (VUP)", type: 0, isActive: true, code: "VUP", country: "CO" },
        { id: "430", displayText: "Villavicencio (VVC)", displayDestinationHtml: "Colombia", displayHtml: "<em>Villavicencio</em> (VVC)", type: 0, isActive: true, code: "VVC", country: "CO" },
        { id: "431", displayText: "Yopal (EYP)", displayDestinationHtml: "Colombia", displayHtml: "<em>Yopal</em> (EYP)", type: 0, isActive: true, code: "EYP", country: "CO" }
      ];

      // üëâ Unimos todas
      const todasLasCiudades = [...ciudades1, ...ciudades2, ...ciudades3];

      // Pasamos a formato que autocomplete entiende
      const opcionesCiudades = todasLasCiudades
        .filter(c => c.isActive)
        .map(c => ({
          label: `${c.displayText} <br><small class="text-gray-500">${c.displayDestinationHtml}</small>`,
          value: c.displayText,
          code: c.code,
          full: c
        }));

      // helper: elimina tags / decodifica HTML a texto plano
      function stripTags(html) {
        const d = document.createElement('div');
        d.innerHTML = html || '';
        return d.textContent || d.innerText || '';
      }

      // Inicializamos autocomplete (reemplaza tu bloque actual)
      function configurarAutocomplete(inputId) {
        $("#" + inputId).autocomplete({
          source: opcionesCiudades,
          minLength: 2,
          focus: function (event, ui) {
            $(this).val(ui.item.full.displayText || stripTags(ui.item.full.displayHtml));
            return false;
          },
          select: function (event, ui) {
            $(this).val(ui.item.full.displayText || stripTags(ui.item.full.displayHtml));
            $(this).data("ciudad", ui.item.full);
            return false;
          }
        }).autocomplete("instance")._renderItem = function (ul, item) {
          const $li = $("<li>");
          const $container = $("<div>").css({ padding: "6px 10px" });

          // Primera l√≠nea
          if (item.full.displayHtml && /<[^>]+>/.test(item.full.displayHtml)) {
            $container.html(item.full.displayHtml);
          } else {
            $container.text(item.full.displayText || stripTags(item.full.displayHtml));
          }

          // Segunda l√≠nea: pa√≠s
          const countryText = item.full.displayDestinationHtml
            ? stripTags(item.full.displayDestinationHtml)
            : (item.full.country || '');
          $container.append(
            $("<div>").append($("<small>").addClass("text-gray-500").text(countryText))
          );

          return $li.append($container).appendTo(ul);
        };
      }

      // Aplicas a ambos inputs
      configurarAutocomplete("origen");
      configurarAutocomplete("destino");

      // Funci√≥n para obtener la ciudad seleccionada
      function getCiudad(inputId) {
        return $(`#${inputId}`).data("ciudad") || null;
      }
      
      // Intercambiar origen/destino
      document.getElementById('swapBtn').addEventListener('click', () => {
        const origen = $("#origen").val();
        const destino = $("#destino").val();
        const origenData = $("#origen").data("ciudad");
        const destinoData = $("#destino").data("ciudad");

        $("#origen").val(destino).data("ciudad", destinoData);
        $("#destino").val(origen).data("ciudad", origenData);
      });

      // Tipo de viaje (solo ida o ida/vuelta)
      const tripType = document.getElementById('tripType');
      const vueltaInput = document.getElementById('vuelta');

      tripType.addEventListener('change', () => {
        if (tripType.value === 'oneway') {
          vueltaInput.disabled = true;
          vueltaInput.value = "";
          vueltaInput.classList.add("bg-gray-100");
        } else {
          vueltaInput.disabled = false;
          vueltaInput.classList.remove("bg-gray-100");
        }
      });

      // Validaci√≥n de fechas
      const todayObj = new Date();
      const yyyy = todayObj.getFullYear();
      const mm = String(todayObj.getMonth() + 1).padStart(2, "0");
      const dd = String(todayObj.getDate()).padStart(2, "0");
      const today = `${yyyy}-${mm}-${dd}`;

      const idaInput = document.getElementById("ida");
      idaInput.min = today;
      vueltaInput.min = today;

      idaInput.addEventListener("change", (e) => {
        vueltaInput.min = e.target.value;
      });
  </script>

  <script>
    (function(){
      // asumimos jQuery ya cargado (lo tienes en el head)
      function initValidation(){
        const $ = window.jQuery;

        function showError($field, message) {
          clearFieldError($field);
          const $msg = $('<p class="error-msg text-sm text-red-600 mt-1" role="alert"></p>').text(message);
          $field.addClass('border-red-500 ring-1 ring-red-200').attr('aria-invalid','true');
          $field.closest('div').append($msg);
        }

        function clearFieldError($field) {
          $field.removeClass('border-red-500 ring-1 ring-red-200').removeAttr('aria-invalid');
          $field.closest('div').find('.error-msg').remove();
        }

        function clearAllErrors() {
          $('#searchForm .error-msg').remove();
          $('#searchForm input, #searchForm select').removeClass('border-red-500 ring-1 ring-red-200').removeAttr('aria-invalid');
        }

        // resolver ciudad desde input (usa data("ciudad") si existe, si no intenta extraer IATA o buscar por texto)
        function resolveCiudadFromInput($input) {
          const stored = $input.data('ciudad');
          if (stored) return stored; // ya es el objeto completo de ciudadesDisponibles

          const raw = String($input.val() || '').trim();
          if (!raw) return null;

          // 1) buscar primer (IATA) en cualquier parte del texto
          const codeMatch = raw.match(/\(([A-Z]{3})\)/i);
          if (codeMatch) {
            const code = codeMatch[1].toUpperCase();
            const found = (window.ciudadesDisponibles || []).find(c => String(c.code).toUpperCase() === code);
            if (found) return found;
          }

          const rawLower = raw.toLowerCase();

          // 2) intentar match exacto contra "displayText - displayDestinationHtml"
          const exact = (window.ciudadesDisponibles || []).find(c => (`${c.displayText} - ${c.displayDestinationHtml}`).toLowerCase() === rawLower);
          if (exact) return exact;

          // 3) intentar startsWith / includes sobre displayText o sobre ciudad parcial
          const fuzzy = (window.ciudadesDisponibles || []).find(c => {
            const full = (`${c.displayText} - ${c.displayDestinationHtml}`).toLowerCase();
            if (full.startsWith(rawLower)) return true;
            if (full.includes(rawLower)) return true;
            // comparar con displayText sin el "(IATA)"
            const cityOnly = c.displayText.split(' (')[0].toLowerCase();
            if (cityOnly.startsWith(rawLower) || cityOnly.includes(rawLower)) return true;
            return false;
          });
          if (fuzzy) return fuzzy;

          return null;
        }

        // obtener string "ciudad corta" (antes de "/" o "‚Äî" o el par√©ntesis)
        function cityShortFromObj(c) {
          if (!c) return '';
          let t = c.displayText || '';
          // quitar " (IATA)"
          t = t.split(' (')[0];
          // si contiene "/", tomar primera parte
          t = t.split('/')[0];
          // si contiene "‚Äî", tomar primera parte
          t = t.split('‚Äî')[0];
          return t.trim();
        }

        $('#searchForm').off('submit.validation').on('submit.validation', function(e){
          e.preventDefault();
          clearAllErrors();

          const $origen  = $('#origen');
          const $destino = $('#destino');
          const $ida     = $('#ida');
          const $vuelta  = $('#vuelta');
          const $pax     = $('#pax');
          const tripType = $('#tripType').val();

          const todayStr = (() => {
            const d = new Date();
            return d.toISOString().split('T')[0];
          })();

          const errors = [];

          // valores visibles
          const origenVal  = String($origen.val() || '').trim();
          const destinoVal = String($destino.val() || '').trim();
          const idaVal     = String($ida.val() || '').trim();
          const vueltaVal  = String($vuelta.val() || '').trim();

          // resolvemos objetos (desde data() o fuzzy matching)
          const origenObj = resolveCiudadFromInput($origen);
          const destinoObj = resolveCiudadFromInput($destino);

          if (!origenObj) {
            errors.push({field:$origen, msg:'Selecciona un aeropuerto de origen v√°lido.'});
          }
          if (!destinoObj) {
            errors.push({field:$destino, msg:'Selecciona un aeropuerto de destino v√°lido.'});
          }
          if (origenObj && destinoObj && String(origenObj.code).toUpperCase() === String(destinoObj.code).toUpperCase()) {
            errors.push({field:$destino, msg:'El destino no puede ser igual al origen.'});
          }

          if (!idaVal) {
            errors.push({field:$ida, msg:'Selecciona la fecha de ida.'});
          } else if (idaVal < todayStr) {
            errors.push({field:$ida, msg:'La fecha de ida no puede ser anterior a hoy.'});
          }

          if (tripType === 'round') {
            if (!vueltaVal) {
              errors.push({field:$vuelta, msg:'Selecciona la fecha de regreso.'});
            } else if (idaVal && vueltaVal < idaVal) {
              errors.push({field:$vuelta, msg:'La fecha de regreso no puede ser antes de la ida.'});
            }
          }

          if (!$pax.val()) {
            errors.push({field:$pax, msg:'Indica la cantidad de pasajeros.'});
          }

          if (errors.length) {
            errors.forEach(err => showError(err.field, err.msg));
            const $first = errors[0].field;
            $('html, body').animate({ scrollTop: $first.closest('div').offset().top - 20 }, 250);
            $first.focus();
            return false;
          }

          // todo correcto: construir URL y redirigir
          const origenCode = (origenObj && origenObj.code) ? origenObj.code.toUpperCase() : '';
          const destinoCode = (destinoObj && destinoObj.code) ? destinoObj.code.toUpperCase() : '';

          const origenName = `${cityShortFromObj(origenObj)} (${origenCode}) - ${origenObj.displayDestinationHtml} (${origenCode})`;
          const destinoName = `${cityShortFromObj(destinoObj)} (${destinoCode}) - ${destinoObj.displayDestinationHtml} (${destinoCode})`;

          const transporte = (tripType === 'round') ? 'redondo' : 'unavia';
          const from = idaVal;
          const to   = (tripType === 'round') ? vueltaVal : idaVal;
          const adultos = parseInt(($pax.val() || '1').match(/\d+/)?.[0] || '1', 10);

          const baseUrl = '';
          const params = new URLSearchParams({
            evento: 'busquedaHome',
            transporte,
            origenName,
            origen: origenCode,
            paisvueloida: origenObj.country || 'CO',
            destinoName,
            destino: destinoCode,
            paisvueloregreso: destinoObj.country || 'CO',
            from,
            to,
            adultos: String(adultos),
            ninos: '0',
            radiogroup: 'on',
            addfirst: 'home',
            option: 'com_sabre',
            view: 'lowfare',
            landing: 'home'
          });

          // mostrar estado UX peque√±o y redirigir
          const $btn = $('#searchForm button[type="submit"]');
          const originalTxt = $btn.html();
          $btn.prop('disabled', true).html('Buscando... ‚è≥');

          setTimeout(() => {
            window.location.href = `${baseUrl}`;
            // si no redirige por alguna raz√≥n, restaurar bot√≥n (fallback)
            $btn.prop('disabled', false).html(originalTxt);
          }, 250);
        });

        // limpiar errores al escribir/cambiar
        $('#searchForm').on('input change', 'input,select', function(){
          clearFieldError($(this));
        });
      } // initValidation

      // jQuery ya cargado en tu HTML; inicializamos ahora mismo
      if (window.jQuery) {
        initValidation();
      } else {
        // fallback: esperar a que cargue jQuery
        var waitInt = setInterval(function(){
          if (window.jQuery) {
            clearInterval(waitInt);
            initValidation();
          }
        }, 50);
      }
    })();
  </script>
</body>
</html>








